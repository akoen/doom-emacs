#+TITLE: Alex Koen's Doom Emacs Configuration
#+AUTHOR: Alex Koen
#+EMAIL: arw.koen@gmail.com

* Init
** Personal Information
#+begin_src emacs-lisp :tangle yes
(setq user-full-name "Alex Koen"
      user-mail-address "arw.koen@gmail.com")
#+end_src

** Theme
#+begin_src emacs-lisp :tangle yes
(setq doom-theme 'doom-one)
#+end_src

** Font
#+begin_src emacs-lisp :tangle yes
(setq doom-font (font-spec :family "Fira Code" :size 14)
      doom-variable-pitch-font (font-spec :family "Input Sans Narrow" :size 14))
#+end_src
(setq doom-font (font-spec :family "monospace" :size 14))

** Miscellaneous
#+begin_src emacs-lisp :tangle yes
(setq display-line-numbers-type 'relative)
#+end_src

** Directories
#+begin_src emacs-lisp :tangle yes
(defconst my/drive-dir "~/Drive/"
  "The root Drive directory, where all documents are stored.")

(defconst my/archive-dir (concat my/drive-dir "Archive/")
  "Archive directory")

#+end_src
* Packages
** =org-mode=
#+begin_src emacs-lisp :tangle yes
(after! org
(setq org-directory (concat my/drive-dir "Tasks/"))
  )
#+end_src

*** Todo keywords

#+BEGIN_SRC emacs-lisp :tangle yes
(setq org-todo-keywords
      (quote ((sequence "TODO(t)" "SOMEDAY(s)" "MAYBE(m)" "|" "DONE(d)" "FAILED(f)"))))
#+END_SRC

*** Capture

#+begin_src emacs-lisp :tangle yes
(setq org-capture-templates
      `(("t" "Todo" entry (file "~/Drive/Tasks/refile.org")
         "* TODO %?")
        ("j" "Journal" entry
         (file+datetree+prompt ,(concat "~/Drive/Areas/Journaling/" (format-time-string "%Y") "/" (format-time-string "%Y") ".org"))
         "* %?")
        ("r" "Resonance" entry
         (file+datetree+prompt "~/Drive/Tasks/resonance.org")
         "* res")
        ("p" "Protocol" entry (file "~/Drive/Tasks/refile.org")
         "* %^{Title}\nSource: %u, %c\n #+BEGIN_QUOTE\n%i\n#+END_QUOTE\n\n\n%?")
        ("L" "Protocol Link" entry (file "~/Drive/Tasks/refile.org")
         "%(org-web-tools--url-as-readable-org \"%:link\")" :immediate-finish t)))
#+END_SRC

*** Agenda

#+begin_src emacs-lisp :tangle yes
(setq org-deadline-warning-days 7
      org-agenda-files '("~/Drive/Tasks"))
#+end_src

*** =org-super-agenda=
#+begin_src emacs-lisp :tangle yes
(use-package! org-super-agenda
  :init
  (setq org-super-agenda-groups '((:name "High Priority"
                                         :time-grid t
                                         :priority "A")
                                  (:name "Habits"
                                         :time-grid t
                                         :tag "habit")
                                  (:name "Personal"
                                         :time-grid t
                                         :and (:tag "personal"
                                                    :not (:tag "habit")))
                                  (:name "School"
                                         :time-grid t
                                         :file-path "school"))
        org-super-agenda-header-map (make-sparse-keymap)) ;; removes custom keybindings which are in opposition to evil-org

  :config
  (org-super-agenda-mode))
#+end_src

** =mu4e=

Everything must be Emacs

#+begin_src emacs-lisp :tangle yes
(use-package! mu4e
  :ensure-system-package mu)

(set-email-account! "arw.koen@gmail.com"
                    '((mu4e-sent-folder       . "/gmail/Sent Mail")
                      (mu4e-drafts-folder     . "/gmail/Drafts")
                      (mu4e-trash-folder      . "/gmail/Trash")
                      (mu4e-refile-folder     . "/gmail/All Mail")
                      (mu4e-compose-signature . "---\nHenrik Lissner")
                      (smtpmail-debug-info    . t)
                      (smtpmail-smtp-server   . "smtp.gmail.com")
                      (smtpmail-smtp-service  . 587)
                      (smtpmail-smtp-user     . "arw.koen")
                      (smtpmail-stream-type   . starttls))
                    t)

(setq auth-sources "~/.authinfo.gpg")
#+end_src
